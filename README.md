# mp4_2_mp3

1. **代码作用**
   - 这段Python代码的功能是将指定输入目录下的所有`.mp4`文件转换为`.mp3`音频文件，并可以选择将输出文件保存到指定的输出目录中。
   - 具体步骤如下：
     - 首先，它通过`os.listdir`获取输入目录中的所有文件列表，然后筛选出以`.mp4`结尾的文件。
     - 如果指定的输出目录不存在且长度大于0，则创建该输出目录。
     - 对于每个`.mp4`文件，它生成对应的`.mp3`文件名（去掉`.mp4`后缀并加上`.mp3`），并确定输出文件路径（如果未指定输出目录则使用输入目录）。
     - 如果输出文件已存在，则跳过转换；否则，使用`moviepy`库的`VideoFileClip`类加载视频文件，提取音频，然后将音频写入输出文件路径。
     - 最后，关闭视频和音频对象以释放资源。
2. **运行方式**
   - 可以在命令行中运行这个程序。
   - 例如，如果脚本名为`mp4_2_mp3.py`，在命令行中进入脚本所在目录后，可以使用以下命令：
     - `python mp4_2_mp3.py -i /path/to/input/directory -o /path/to/output/directory`
     - 其中`-i`参数指定输入目录（包含`.mp4`文件），`-o`参数指定输出目录（可选，如果不指定则默认与输入目录相同，只是文件后缀变为`.mp3`）。
3. **依赖安装**
   - 需要安装`moviepy`库。
   - 可以使用`pip install moviepy`命令进行安装。
4. **用途, 举个例子**
   - 可以把网易云的mv 下载下来, 然后转换为 mp3 格式

https://www.doubao.com/thread/we8036b99bd43c6e3